const CACHE='taxmeta-v1'; self.addEventListener('install',e=>{ e.waitUntil(caches.open(CACHE).then(c=>c.addAll(['/index.html','/style.css','/manifest.json']))); }); self.addEventListener('fetch',e=>{ e.respondWith(caches.match(e.request).then(r=> r || fetch(e.request).then(res=>{ let c=res.clone(); caches.open(CACHE).then(cache=>{ try{ cache.put(e.request,c); }catch(e){} }); return res; }))); });